language: python

sudo: false

python:
- "3.6"

env:
  global:
    - AWS_REGION=eu-central-1
    - SECRET_KEY=a

cache: pip

install:
  - pip install pipenv
  - pipenv sync --dev

script:
  - echo "No tests :)"

deploy:
  - provider: script
    skip_cleanup: true
    script: cd app && zappa update && zappa manage dev "migrate" && ./manage.py collectstatic --noinput
    on:
      branch: master
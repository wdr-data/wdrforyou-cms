language: python
sudo: false
python:
- '3.6'
env:
  global:
  - AWS_REGION=eu-central-1
  - S3_BUCKET_NAME=newsforyou-static-staging
  - SECRET_KEY=a
  - BOT_SERVICE_ENDPOINT=https://example.com/
cache: pip
install:
- pip install pipenv
- pipenv sync --dev
script:
- echo "No tests :)"
deploy:
- provider: script
  skip_cleanup: true
  script: cd app && zappa update staging && zappa manage staging "migrate" && ./manage.py
    collectstatic --noinput
  on:
    branch: master
- provider: script
  skip_cleanup: true
  script: cd app && zappa update prod && zappa manage prod "migrate" && ./manage.py
    collectstatic --noinput
  on:
    branch: production
notifications:
  slack:
    secure: Kuzm+E7LTc/tcJ7poa5Xk4/2HFnnHZyCHPP41wldF9eDrhzanHhQ9ZKrOXyVzZQsOqvuiYuuBdVpHJ3jurG3W0E3Qz/585V0dwOZq3n5wOPgJTIKv2rHmXiL6Lme6I641gAoIPCycm97EW+PdxEVIH2gYdSuBi1QVF1L928363nhlixqcJ7od4+nnxVxquqCy8FoAaGiZwcwJAyqLX8zw5Ri0fkIw2oIovt6oF1MB2UzeQE+ReKBQX+7KcmAFb5A02grnX29BAUQuYJQf0uMdE7BgDT12NxrIqBVzwuDYD18Zv0Wy5pwSHBg5bpAesZ0UlfyCfA32OFZQwQ4B4Ijo87tm5xwapzd5fvgMRL6LRtBPejZQN0g5JgNQOFUwhsOeR1eJ2QQg72b0ybu2Xq4nDDnDWwApAF0ZsbIuDKX5K/z10wPLxg0SDPWFLUpRSFhKPbdz8vSm45jjkT2F8WDKtTO5aDo4qw6XaQEWdZ21AxitFQxqlHUF5LgSky5raIggnD4Wsj27/SBrpWQBV2NRbbRCvpPkJA+EShgTGIijoWNGc1e7d4jbqve3m+j4x0jgdgkDiA7JGd1SPfM3BSyuOvyFZYMVdd4p7m0OxP8/ydeuUaH87Oa85jAlVBGoOO903nhXAgxMWNOZWGVwNClX2Nac9h4hqC3iLhjTIBasyM=
    on_pull_requests: false
    template:
      - "Deployment %{result}:"
      - "<%{compare_url}|%{repository_slug}:%{branch}#%{commit}> by %{author}"